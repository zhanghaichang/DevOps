## liquibase 命令附录


<div class="table-box"><table><thead><tr><th>命令名称</th><th>命令描述</th></tr></thead><tbody><tr><td>update</td><td>更新数据库到当前版本</td></tr><tr><td>updateSQL</td><td>写入SQL将数据库更新到currentversion或STDOUT</td></tr><tr><td>updateCount &lt;num&gt;</td><td>将下一个NUM更改应用到数据库</td></tr><tr><td>updateCountSQL &lt;num&gt;</td><td>写入SQL以将下一个NUM更改应用到数据库</td></tr><tr><td>updateToTag &lt;tag&gt;</td><td>使用指定的标记将数据库更新到变更集</td></tr><tr><td>updateToTagSQL &lt;tag&gt;</td><td>使用指定的标记将SQL写入(到标准输出)到更改集</td></tr><tr><td>rollback &lt;tag&gt;</td><td>将数据库回滚到指定标签的状态is was</td></tr><tr><td>rollbackSQL &lt;tag&gt;</td><td>生成数据库回滚到指定标签的sql</td></tr><tr><td>rollbackToDate &lt;date/time&gt;</td><td>将数据库回滚到给定日期/时间的状态is was。日期格式:yyyy-MM-dd 'HH: mm: ss</td></tr><tr><td>rollbackToDateSQL &lt;date/time&gt;</td><td>写入SQL以将数据库回滚到给定日期/时间版本的状态到STDOUT</td></tr><tr><td>rollbackCount &lt;value&gt;</td><td>回滚应用于数据库的最后一个&lt;值&gt;更改集</td></tr><tr><td>rollbackCountSQL &lt;value&gt;</td><td>写入SQL以回滚最后一个&lt;值&gt;更改集到应用于数据库的stdoutapply</td></tr><tr><td>futureRollbackSQL</td><td>写入SQL，以便在更改日志中的更改完成后将数据库回滚到当前状态</td></tr><tr><td>futureRollbackSQL &lt;value&gt;</td><td>在更改日志中的&lt;值&gt;更改完成后，写入SQL以将数据库回滚到当前状态</td></tr><tr><td>futureRollbackFromTagSQL &lt;tag&gt;</td><td>写入(到标准输出)SQL，以便在更改后将数据库回滚到其当前状态</td></tr><tr><td>updateTestingRollback</td><td>更新数据库，然后再次回滚更改。用于测试回滚支持</td></tr><tr><td>generateChangeLog</td><td>写入更改日志XML以将数据库的当前状态复制到标准输出</td></tr><tr><td>snapshot</td><td>将数据库的当前状态写入标准输出</td></tr><tr><td>snapshotReference</td><td>将referenceUrl数据库的当前状态写入标准输出</td></tr><tr><td>Diff Commands</td><td>数据库对比命令</td></tr><tr><td>diff [diff parameters]</td><td>数据库对比命令</td></tr><tr><td>diffChangeLog [diff parameters]</td><td>数据库对比日志</td></tr><tr><td>Documentation Commands</td><td>文档命令</td></tr><tr><td>dbDoc &lt;outputDirectory&gt;</td><td>基于当前数据库和更改日志生成类似javadoc的文档</td></tr><tr><td>Maintenance Commands</td><td>维护命令</td></tr><tr><td>tag &lt;tag string&gt;</td><td>给当前的数据库打标签，方便日后回滚</td></tr><tr><td>tagExists &lt;tag string&gt;</td><td>检查对应的标签是否存在</td></tr><tr><td>status [--verbose]</td><td>输出为执行changeset的行数</td></tr><tr><td>unexpectedChangeSets[--verbose]</td><td>输出本地不存在changeset 行数</td></tr><tr><td>validate</td><td>检查是否有错误的changelog</td></tr><tr><td>calculateCheckSum &lt;id&gt;</td><td>检查指定changeset id 的checksum值 格式为 <code>filepath::id::author</code></td></tr><tr><td>clearCheckSums</td><td>从数据库日志中删除所有保存的校验和</td></tr><tr><td>changelogSync</td><td>标记所有的更改已执行</td></tr><tr><td>changelogSyncSQL</td><td>生成标记更改已执行的sql并输出到标准输出</td></tr><tr><td>markNextChangeSetRan</td><td>将下一个变更标记为已执行</td></tr><tr><td>markNextChangeSetRanSQL</td><td>生成将下一个变更标记为已执行的sql并输出到标准输出</td></tr><tr><td>listLocks</td><td>列出liquibase数据库锁</td></tr><tr><td>releaseLocks</td><td>释放所有的liquibase数据库锁</td></tr><tr><td>dropAll</td><td>删除数据库表(慎用！)</td></tr></tbody></table></div>

## 可选的参数

<div class="table-box"><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>--classpath=&lt;value&gt;</td><td>类路径包含迁移文件和JDBC驱动程序</td></tr><tr><td>--driver=&lt;jdbc.driver.ClassName&gt;</td><td>数据库驱动程序类名</td></tr><tr><td>--databaseClass=&lt;database.ClassName&gt;</td><td>自定义liquibase.database。Databaseimplementation使用</td></tr><tr><td>--propertyProviderClass=&lt;properties.ClassName&gt;</td><td>要使用的自定义属性实现</td></tr><tr><td>--defaultSchemaName=&lt;name&gt;</td><td>要使用的默认数据库模式</td></tr><tr><td>--contexts=&lt;value&gt;</td><td>更改要执行的上下文</td></tr><tr><td>--labels=&lt;expression&gt;</td><td>定义要执行的标签变更集的表达式</td></tr><tr><td>--defaultsFile=&lt;/path/to/file.properties&gt;</td><td>带有默认选项值的文件(默认:./liquibase.properties)</td></tr><tr><td>--delimiter=&lt;string&gt;</td><td>与executeSql命令一起使用，用于设置用于分解包含多个语句的文件的字符串。</td></tr><tr><td>--driverPropertiesFile=&lt;/path/to/file.properties&gt;</td><td>在要创建的JDBC连接上设置自定义属性的文件</td></tr><tr><td>--changeExecListenerClass=&lt;ChangeExecListener.ClassName&gt;</td><td>自定义更改Execlistener实现以使用</td></tr><tr><td>--changeExecListenerPropertiesFile=&lt;/path/to/file.properties&gt;</td><td>用于自定义更改Exec侦听器的属性</td></tr><tr><td>--liquibaseCatalogName=&lt;name&gt;</td><td>带有liquibase表的目录的名称</td></tr><tr><td>--liquibaseSchemaName=&lt;name&gt;</td><td>带有liquibase表的模式的名称</td></tr><tr><td>--databaseChangeLogTableName=&lt;name&gt;</td><td>Liquibase ChangeLogtable的名称(默认:DATABASECHANGELOG)</td></tr><tr><td>--databaseChangeLogLockTableName=&lt;name&gt;</td><td>Liquibase ChangeLogLock表的名称(默认:DATABASECHANGELOGLOCK)</td></tr><tr><td>--liquibaseSchemaName=&lt;name&gt;</td><td>带有liquibase表的模式的名称</td></tr><tr><td>--includeSystemClasspath=&lt;true|false&gt;</td><td>将系统类路径包含在Liquibase类路径中(默认:true)</td></tr><tr><td>--promptForNonLocalDatabase=&lt;true|false&gt;</td><td>如果非本地主机数据库(默认:false)，则提示</td></tr><tr><td>--logLevel=&lt;level&gt;</td><td>执行日志级别(调试、信息、警告、严重、关闭)</td></tr><tr><td>--logFile=&lt;file&gt;</td><td>日志文件</td></tr><tr><td>--currentDateTimeFunction=&lt;value&gt;</td><td>覆盖SQL中使用的当前日期时间函数。适用于不受支持的数据库</td></tr><tr><td>--outputDefaultSchema=&lt;true|false&gt;</td><td>如果为真，SQL对象引用包括模式名，甚至ifit也是默认模式。默认值为true</td></tr><tr><td>--outputDefaultCatalog=&lt;true|false&gt;</td><td>如果为真，SQL对象引用包括目录名，甚至ifit也是默认目录。默认值为true</td></tr><tr><td>--outputFile=&lt;file&gt;</td><td>为写入输出的命令写入输出的文件，例如updateSQL。如果没有指定，则写入sysout。</td></tr><tr><td>--help</td><td>打印此消息</td></tr><tr><td>--version</td><td>打印此版本信息</td></tr></tbody></table></div>


## diff 命令必传参数

<div class="table-box"><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>--referenceUsername=&lt;value&gt;</td><td>对比数据库用户名</td></tr><tr><td>--referencePassword=&lt;value&gt;</td><td>对比数据库密码</td></tr><tr><td>--referenceUrl=&lt;value&gt;</td><td>对比数据库url</td></tr></tbody></table></div>

## diff 命令可选参数

<div class="table-box"><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>--defaultCatalogName=&lt;name&gt;</td><td>默认数据库目录</td></tr><tr><td>--defaultSchemaName=&lt;name&gt;</td><td>默认数据库模式</td></tr><tr><td>--referenceDefaultCatalogName=&lt;name&gt;</td><td>对比数据库要使用的参考数据库目录</td></tr><tr><td>--referenceDefaultSchemaName=&lt;name&gt;</td><td>对比数据库要使用的数据库模式</td></tr><tr><td>--schemas=&lt;name1,name2&gt;</td><td>从比较中包含对象的数据库模式</td></tr><tr><td>--referenceSchemas=&lt;name1,name2&gt;</td><td>引用数据库模式来包含来自比较的对象，只有在与——模式不同时才需要</td></tr><tr><td>--outputSchemaAs=&lt;name1,name2&gt;</td><td>在diffChangeLog/generateChangeLog上，使用这些名称作为schemaNameinstead of the real name。</td></tr><tr><td>--includeCatalog=&lt;true|false&gt;</td><td>如果为真，则在生成的变更集中将目录默认为false</td></tr><tr><td>--includeSchema=&lt;true|false&gt;</td><td>如果为真，模式将包含在生成的changeSetsDefaults中</td></tr><tr><td>--referenceDriver=&lt;jdbc.driver.ClassName&gt;</td><td>引用数据库驱动程序类名</td></tr><tr><td>--dataOutputDirectory=DIR</td><td>以CSV格式输出给定目录中的数据</td></tr><tr><td>--diffTypes</td><td>diff类型的列表，包括inChange日志用一个逗号分隔</td></tr></tbody></table></div>
